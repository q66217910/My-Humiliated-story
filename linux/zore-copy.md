零拷贝
===

 零拷贝就是一种避免 CPU 将数据从一块存储拷贝到另外一块存储的技术。针对操作系统中的设备驱动程序、文件系统以及网络协议堆栈而出现
 的各种零拷贝技术极大地提升了特定应用程序的性能，并且使得这些应用程序可以更加有效地利用系统资源。这种性能的提升就是通过在数据拷
 贝进行的同时，允许 CPU 执行其他的任务来实现的。
 
 
 中断方式
 ---
 
    ①用户进程发起数据读取请求
    ②系统调度为该进程分配cpu
    ③cpu向io控制器(ide,scsi)发送io请求
    ④用户进程等待io完成，让出cpu
    ⑤系统调度cpu执行其他任务
    ⑥数据写入至io控制器的缓冲寄存器
    ⑦缓冲寄存器满了向cpu发出中断信号
    ⑧cpu读取数据至内存
    
 直接内存存取
 ---
 
    ①用户进程发起数据读取请求
    ②系统调度为该进程分配cpu
    ③cpu向DMA发送io请求
    ④用户进程等待io完成，让出cpu
    ⑤系统调度cpu执行其他任务
    ⑥数据写入至io控制器的缓冲寄存器
    ⑦DMA不断获取缓冲寄存器中的数据（需要cpu时钟）
    ⑧传输至内存（需要cpu时钟）
    ⑨所需的全部数据获取完毕后向cpu发出中断信号

数据拷贝
---

    ①一个read系统调用后，DMA执行了一次数据拷贝，从磁盘到内核空间
    ②read结束后，发生第二次数据拷贝，由cpu将数据从内核空间拷贝至用户空间
    ③send系统调用，cpu发生第三次数据拷贝，由cpu将数据从用户空间拷贝至内核空间(socket缓冲区)
    ④send系统调用结束后，DMA执行第四次数据拷贝，将数据从内核拷贝至协议引擎
    ⑤另外，这四个过程中，每个过程都发生一次上下文切换
    
数据拷贝优化
---
    
    ①DMA从拷贝至内核缓冲区
    ②cpu将数据从内核缓冲区拷贝至内核空间(socket缓冲区)
    ③DMA将数据从内核拷贝至协议引擎
    ④这三个过程中共发生2次上下文切换，分别为发起读取文件和发送数据
    
